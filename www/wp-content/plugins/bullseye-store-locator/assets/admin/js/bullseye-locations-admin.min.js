(function(){!function(a){return a(function(){var b,c,d,e;return 1===a(".settings-ui").length&&(b=null,a(".dashboard_icon").find("img").attr("src",BullseyeInterfaceSetting.img_url.img_url_dashboard),a(".locations_icon").find("img").attr("src",BullseyeInterfaceSetting.img_url.img_url_locations),a(".reports_icon").find("img").attr("src",BullseyeInterfaceSetting.img_url.img_url_reports),a(".dashboard_icon").find("a").attr("href",BullseyeInterfaceSetting.action_url.action_url_dashboard),a(".locations_icon").find("a").attr("href",BullseyeInterfaceSetting.action_url.action_url_locations),a(".reports_icon").find("a").attr("href",BullseyeInterfaceSetting.action_url.action_url_reports),c=function(b,c){var e;return e=b.data("interface-id"),a.ajax({type:"POST",dataType:"json",url:BullseyeDeleteApiInterface.ajaxurl,data:{action:BullseyeDeleteApiInterface.action,deleteinterface:e,deletePage:c,"ajax-nonce":BullseyeDeleteApiInterface.nonce},success:function(c){return a(".success-message .error-message").hide().text(""),d(),c.result?(b.remove(),a(".success-message").show().text("The Interface was deleted successfull.")):a(".error-message").show().text("The Interface can't be deleted")}})},d=function(){return a.ajax({type:"POST",url:BullseyeInterfaceSetting.ajaxurl,data:{action:BullseyeInterfaceSetting.action,"ajax-nonce":BullseyeInterfaceSetting.nonce},dataType:"json",success:function(a){return null!=a?e(a.result):void 0}})},e=function(b){var c,d,e,f,g,h,i;if(c=a("#js-interfaces-table"),c.find("div").remove(),0===b.length)return a(".js-interfaces-table-section").hide();for(a(".js-interfaces-table-section").show(),h=[],f=0,g=b.length;g>f;f++)d=b[f],i=_.template(a("#js-template-interface").html()),e=i(d),h.push(c.append(e));return h},a(".js-add-interface").click(function(){return a.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:BullseyeAddApiInterface.action,"ajax-nonce":BullseyeAddApiInterface.nonce},success:function(b){return d(),a(".success-message .error-message").hide().html(""),b.result?a(".success-message").show().html("<strong>Success!</strong> A new interface or page has been added."):a(".error-message").show().html("The Interface can't be added")}})}),a(".js-add-page").click(function(){return a.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:BullseyeAddApiPage.action,"ajax-nonce":BullseyeAddApiPage.nonce,page:a(".js-page-input").val()},beforeSend:function(){var b;return b=a(".js-page-input").val(),""===b?a(".js-page-input").parent().next().show().delay(5e3).fadeOut():void 0},success:function(b){return d(),a(".success-message .error-message").hide().html(""),b.result?a(".success-message").show().html("<strong>Success!</strong> A new interface or page has been added."):a(".error-message").show().html("The Interface can't be added")}})}),a(".js-dialog-delete").dialog({autoOpen:!1,modal:!0,title:"Delete interface",width:"400px"}),a(".js-delete").live("click",function(){var d,e;return b=a(this).parent().parent(),e=b.data("page-id"),e?(a(".js-dialog-delete .js-dialog-delete-confirm").show(),d={Delete:function(){return a(this).dialog("close"),c(b,!1)},"Delete with page":function(){return a(this).dialog("close"),c(b,!0)},Cancel:function(){return a(this).dialog("close")}}):(a(".js-dialog-delete .js-dialog-delete-confirm").hide(),d={Delete:function(){return a(this).dialog("close"),c(b,!1)},Cancel:function(){return a(this).dialog("close")}}),a(".js-dialog-delete").dialog("option","buttons",d),a(".js-dialog-delete").dialog("open")}),a(".js-publish-code").live("click",function(){var b,c;return a(".publish-code-tags").hide(),b=a(this).parent().parent().next(),c=a(".table").width()-27,b.find(".table-cell-colspan").css("width",c+"px"),b.show()}),a(".publish-code-tags .js-close").live("click",function(){return a(".publish-code-tags").hide()}),a("#userLogout").on("click",function(){return a.ajax({type:"POST",url:BullseyeUserLogout.ajaxurl,data:{action:BullseyeUserLogout.action,"ajax-nonce":BullseyeUserLogout.nonce},success:function(a){return a?location.reload():void 0}})}),"undefined"!=typeof BullseyeSettingsData&&null!==BullseyeSettingsData&&(null!=BullseyeSettingsData.email&&a(".js-account-email").text(BullseyeSettingsData.email),null!=BullseyeSettingsData.interfaces&&e(BullseyeSettingsData.interfaces))),1===a(".login-ui").length?a(".login-ui form").ajaxForm({data:{action:BullseyeLogin.action,"ajax-nonce":BullseyeLogin.nonce},dataType:"json",url:BullseyeLogin.ajaxurl,beforeSend:function(){var b,c;return b=a("#input_email").val(),c=a("#input_password").val(),""===b&&a("#input_email").next().show().delay(5e3).fadeOut(),""===c?a("#input_password").next().show().delay(5e3).fadeOut():void 0},success:function(b){return b.result?location.reload():a(".error_message").show()}}):void 0})}(jQuery)}).call(this);